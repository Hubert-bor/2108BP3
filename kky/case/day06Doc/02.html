<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			pre{
				font-size: 20px;
			}
			.d{
				border: 1px solid red;
				margin: 10px;
				padding: 10px;
			}
		</style>
	</head>
	<body>
		<pre>
	4.自定义动画
默认情况下，所有 HTML 元素都有一个静态位置，且无法移动。
如需对位置进行操作，
要记得首先把元素的 CSS position 属性设置为 relative、fixed 或 absolute！
	
jQuery 动画 - animate() 方法
jQuery animate() 方法用于创建自定义动画。
语法：
$(selector).animate({params},speed,callback);
必需的 params 参数定义形成动画的 CSS 属性。
可选的 speed 参数规定效果的时长。它可以取以下值："slow"、"fast" 或毫秒。
可选的 callback 参数是动画完成后所执行的函数名称。

jQuery animate() - 操作多个属性
请注意，生成动画的过程中可同时使用多个属性：

jQuery animate() - 使用相对值
也可以定义相对值（该值相对于元素的当前值）。需要在值的前面加上 += 或 -=：

jQuery animate() - 使用预定义的值
您甚至可以把属性的动画值设置为 "show"、"hide" 或 "toggle"：
	5.列队动画
默认地，jQuery 提供针对动画的队列功能。
这意味着如果您在彼此之后编写多个 animate() 调用，
jQuery 会创建包含这些方法调用的"内部"队列。
然后逐一运行这些 animate 调用。

自定义实现列队动画的方式，有两种：
1.通过连缀或顺序来实现列队动画。
2.在回调函数中再执行一个动画；

如果是同一个元素，可以依次顺序或连缀调用。
如果是不同元素，可以使用回调函数。
但有时列队动画太多，回调函数的可读性大大降低。

//连缀无法实现按顺序列队 
$('#box').slideUp('slow').slideDown('slow').css('background','orange');
注意：如果是动画方法，连缀可以实现依次列队，
而.css()方法不是动画方法，会在一开始传入列队之前。
那么，可以采用动画方法的回调函数来解决。
 //使用回调函数，强行将.css()方法排队到.slideDown()之后
$('#box').slideUp('slow').slideDown('slow',function(){ 
     $(this).css('background','orange'); 
});

如果这样的话，当列队动画繁多的时候，可读性不但下降，而且原本的动画方法不够清晰。
所以，我们的想法是每个操作都是自己独立的方法。那么 jQuery 提供了一个类似于回调函数的方法：.queue()。 
//使用.queue()方法模拟动画方法跟随动画方法之后 
$('#box').slideUp('slow').slideDown('slow').queue(function(){ 
     $(this).css('background','orange'); 
});

queue() 方法显示被选元素上要执行的函数队列。
队列是一个或多个等待运行的函数。
queue() 方法通常与 dequeue() 方法一起使用。
一个元素可以有若干队列。大部分通常只有一个，"fx" 队列，即默认的 jQuery 队列。

dequeue() 方法从队列中移除下一个函数，然后执行函数。
队列是一个或多个等待运行的函数。
dequeue() 方法通常与 queue() 方法一起使用。
一个元素可以有若干队列。大部分通常只有一个，"fx" 队列，即默认的 jQuery 队列。
注意：您应该确保 dequeue() 方法在通过 queue() 添加一个函数之后被调用，
以便允许要继续的进程。

clearQueue() 方法从尚未运行的队列中移除所有项目。
请注意当函数开始运行时，它会一直运行直到完成。
相关方法：
queue() - 演示排队的函数
dequeue() - 从队列移除下一个函数，然后执行函数
	6.动画相关方法
	7.动画全局属性
		</pre>
		<div id="d1" class="d">
			<button type="button" id="d1Btn">animate()操作单个属性</button>
			<button type="button" id="d1Btn2">animate()操作多个属性,相对值</button>
			<button type="button" id="d1Btn3">animate()使用预定义的值</button>
			<div style="width:100px;height: 100px;background-color: darkgreen;position: relative;">
			</div>
		</div>
		<pre>
						//
			$("#d1Btn3").click(function(){
				$("#d1>div").animate(
					{
						height:"toggle",//使用预定义值
						width:"toggle",//使用预定义值
					},
					2000,
					function(){
						alert("完成移动");
					}
				);
			});
			$("#d1Btn2").click(function(){
				$("#d1>div").animate(
					{
						left:'400px',
						opacity:"0.5",
						width:"+=50px",//使用相对值
						height:"+=50px",//使用相对值
						top:"10px"
					},
					2000,
					function(){
						alert("完成移动");
					}
				);
			});
			$("#d1Btn").click(function(){
				$("#d1>div").animate(
					{left:'+=250px'},
					2000,
					function(){
						alert("完成移动1");
					}
				);
			});
		</pre>
		<div id="d2" class="d">
			<button type="button" id="d2Btn1">animate()使用队列功能</button>
			<button type="button" id="d2Btn2">animate()使用队列功能--链式</button>
			<button type="button" id="d2Btn3">animate()使用队列功能--回调函数</button>
			<div style="width:100px;height: 100px;background-color: darkgreen;position: relative;">
			</div>
		</div>
		<pre>
						//使用队列功能 ------回调函数
			$("#d2Btn3").click(function(){
				var div=$("#d2>div");
				div.animate({height:"+=50px",opacity:"0.4"},2500,function(){
					div.animate({width:"+=50px",opacity:"0.8"},2500,function(){
						div.animate({left:"+=300px",opacity:"0.8"},2500,function(){
							div.animate({height:"-=50px",opacity:"0.4"},2500,function(){
								div.animate({width:"-=50px",opacity:"0.8"},2500,function(){
									div.animate({left:"-=300px",opacity:"0.8"},2500);
								});
							});
						});
					});
				});
				console.log("队列长度3:",div.queue().length);
			});
			//使用队列功能 ------链式
			$("#d2Btn2").click(function(){
				var div=$("#d2>div");
				div.animate({height:"+=50px",opacity:"0.4"},2500)
				.animate({width:"+=50px",opacity:"0.8"},2500)
				.animate({left:"+=300px",opacity:"0.8"},2500)
				.animate({height:"-=50px",opacity:"0.4"},2500)
				.animate({width:"-=50px",opacity:"0.8"},2500)
				.animate({left:"-=300px",opacity:"0.8"},2500);
				console.log("队列长度2:",div.queue().length);
			});
			//使用队列功能
			$("#d2Btn1").click(function(){
				var div=$("#d2>div");
				div.animate({height:"+=50px",opacity:"0.4"},2500);
				div.animate({width:"+=50px",opacity:"0.8"},2500);
				div.animate({left:"+=300px",opacity:"0.8"},2500);
				div.animate({height:"-=50px",opacity:"0.4"},2500);
				div.animate({width:"-=50px",opacity:"0.8"},2500);
				div.animate({left:"-=300px",opacity:"0.8"},2500);
				console.log("队列长度1:",div.queue().length);
			});
		</pre>
		<div id="d3" class="d">
			<button type="button" id="d3Btn1">列队动画1</button>
			<button type="button" id="d3Btn2">列队动画2</button>
			<button type="button" id="d3Btn3">列队动画queue()</button>
			<div style="width:100px;height: 100px;background-color: darkgreen;position: relative;">
			</div>
		</div>
		<pre>
						//使用队列queue()方式
			$("#d3Btn3").click(function(){
				var div=$("#d3>div");
				div.slideUp("slow").slideDown("slow").queue(function(){
					$(this).css("background-color","pink");
				});
			});
			//可以通过回调函数将css()方法排队到slideDown()之后
			$("#d3Btn2").click(function(){
				var div=$("#d3>div");
				div.slideUp("slow").slideDown("slow",function(){
					$(this).css("background-color","blue");
				});
			});
			//链式,不能实现队列功能,因为css不是动画方法
			$("#d3Btn1").click(function(){
				var div=$("#d3>div");
				div.slideUp("slow").slideDown("slow").css("background-color","red");//链式写法无法实现按顺序列队
			});
		</pre>
		<div id="d4" class="d">
			<button type="button" id="d4Btn1">开始动画1</button>
			<button type="button" id="d4Btn2">开始动画2</button>
			<button type="button" id="d4Btn3">开始动画3</button>
			<button type="button" id="d4Btn4">停止动画</button>
			<div style="width:100px;height: 100px;background-color: darkgreen;position: relative;">
			</div>
		</div>
		<pre>
						//queue(),dequeue(),clearQueue()
			$(function(){
				var div=$("#d4>div");
				$("#d4Btn1").click(function(){
					div.animate({height:200},"slow",function(){
						console.log("1");
					});
					div.animate({width:200},"slow",function(){
						console.log("2");
					});
					div.queue(function(){
						div.css("background-color","red");
						div.dequeue();//如果把此行代码注释,后面的两个animate()方法将不再执行
						console.log("3");
					});
					div.animate({height:100},"slow",function(){
						console.log("4");
					});
					div.animate({width:100},"slow",function(){
						console.log("5");
					});
				});
				$("#d4Btn2").click(function(){
					div.animate({height:200},"slow",function(){
						console.log("1");
					});
					div.animate({width:200},"slow",function(){
						console.log("2");
					});
					div.queue(function(){
						div.css("background-color","blue");
						//div.dequeue();//如果把此行代码注释,后面的两个animate()方法将不再执行
						console.log("3");
					});
					div.animate({height:100},"slow",function(){
						console.log("4");
					});
					div.animate({width:100},"slow",function(){
						console.log("5");
					});
				});
				$("#d4Btn3").click(function(){
					div.animate({height:200},"slow",function(){
						console.log("1");
					});
					div.animate({width:200},"slow",function(){
						console.log("2");
					});
					//div.queue(function(){
						div.css("background-color","yellow");
						//div.dequeue();//如果把此行代码注释,后面的两个animate()方法将不再执行
						console.log("3");
					//});
					div.animate({height:100},"slow",function(){
						console.log("4");
					});
					div.animate({width:100},"slow",function(){
						console.log("5");
					});
				});
				$("#d4Btn4").click(function(){
					div.clearQueue();
				})
			});
		</pre>
		<script src="js/jquery-1.12.4.js"></script>
		<script>
			//queue(),dequeue(),clearQueue()
			$(function(){
				var div=$("#d4>div");
				$("#d4Btn1").click(function(){
					div.animate({height:200},"slow",function(){
						console.log("1");
					});
					div.animate({width:200},"slow",function(){
						console.log("2");
					});
					div.queue(function(){
						div.css("background-color","red");
						div.dequeue();//如果把此行代码注释,后面的两个animate()方法将不再执行
						console.log("3");
					});
					div.animate({height:100},"slow",function(){
						console.log("4");
					});
					div.animate({width:100},"slow",function(){
						console.log("5");
					});
				});
				$("#d4Btn2").click(function(){
					div.animate({height:200},"slow",function(){
						console.log("1");
					});
					div.animate({width:200},"slow",function(){
						console.log("2");
					});
					div.queue(function(){
						div.css("background-color","blue");
						//div.dequeue();//如果把此行代码注释,后面的两个animate()方法将不再执行
						console.log("3");
					});
					div.animate({height:100},"slow",function(){
						console.log("4");
					});
					div.animate({width:100},"slow",function(){
						console.log("5");
					});
				});
				$("#d4Btn3").click(function(){
					div.animate({height:200},"slow",function(){
						console.log("1");
					});
					div.animate({width:200},"slow",function(){
						console.log("2");
					});
					//div.queue(function(){
						div.css("background-color","yellow");
						//div.dequeue();//如果把此行代码注释,后面的两个animate()方法将不再执行
						console.log("3");
					//});
					div.animate({height:100},"slow",function(){
						console.log("4");
					});
					div.animate({width:100},"slow",function(){
						console.log("5");
					});
				});
				$("#d4Btn4").click(function(){
					div.clearQueue();
				})
			});
			
			//使用队列queue()方式
			$("#d3Btn3").click(function(){
				var div=$("#d3>div");
				div.slideUp("slow").slideDown("slow").queue(function(){
					$(this).css("background-color","pink");
				});
			});
			//可以通过回调函数将css()方法排队到slideDown()之后
			$("#d3Btn2").click(function(){
				var div=$("#d3>div");
				div.slideUp("slow").slideDown("slow",function(){
					$(this).css("background-color","blue");
				});
			});
			//链式,不能实现队列功能,因为css不是动画方法
			$("#d3Btn1").click(function(){
				var div=$("#d3>div");
				div.slideUp("slow").slideDown("slow").css("background-color","red");//链式写法无法实现按顺序列队
			});
			//使用队列功能 ------回调函数
			$("#d2Btn3").click(function(){
				var div=$("#d2>div");
				div.animate({height:"+=50px",opacity:"0.4"},2500,function(){
					div.animate({width:"+=50px",opacity:"0.8"},2500,function(){
						div.animate({left:"+=300px",opacity:"0.8"},2500,function(){
							div.animate({height:"-=50px",opacity:"0.4"},2500,function(){
								div.animate({width:"-=50px",opacity:"0.8"},2500,function(){
									div.animate({left:"-=300px",opacity:"0.8"},2500);
								});
							});
						});
					});
				});
				console.log("队列长度3:",div.queue().length);
			});
			//使用队列功能 ------链式
			$("#d2Btn2").click(function(){
				var div=$("#d2>div");
				div.animate({height:"+=50px",opacity:"0.4"},2500)
				.animate({width:"+=50px",opacity:"0.8"},2500)
				.animate({left:"+=300px",opacity:"0.8"},2500)
				.animate({height:"-=50px",opacity:"0.4"},2500)
				.animate({width:"-=50px",opacity:"0.8"},2500)
				.animate({left:"-=300px",opacity:"0.8"},2500);
				console.log("队列长度2:",div.queue().length);
			});
			//使用队列功能
			$("#d2Btn1").click(function(){
				var div=$("#d2>div");
				div.animate({height:"+=50px",opacity:"0.4"},2500);
				div.animate({width:"+=50px",opacity:"0.8"},2500);
				div.animate({left:"+=300px",opacity:"0.8"},2500);
				div.animate({height:"-=50px",opacity:"0.4"},2500);
				div.animate({width:"-=50px",opacity:"0.8"},2500);
				div.animate({left:"-=300px",opacity:"0.8"},2500);
				console.log("队列长度1:",div.queue().length);
			});
			
			//
			$("#d1Btn3").click(function(){
				$("#d1>div").animate(
					{
						height:"toggle",//使用预定义值
						width:"toggle",//使用预定义值
					},
					2000,
					function(){
						alert("完成移动");
					}
				);
			});
			$("#d1Btn2").click(function(){
				$("#d1>div").animate(
					{
						left:'400px',
						opacity:"0.5",
						width:"+=50px",//使用相对值
						height:"+=50px",//使用相对值
						top:"10px"
					},
					2000,
					function(){
						alert("完成移动");
					}
				);
			});
			$("#d1Btn").click(function(){
				$("#d1>div").animate(
					{left:'+=250px'},
					2000,
					function(){
						alert("完成移动1");
					}
				);
			});
			
			function fgx(str){
				str==undefined?str="":str;
				console.log(str+"------------------------");
			}
		</script>
	</body>
</html>